:root{
  --bg:#fff8fb; --card:#fff; --ink:#222; --sub:#666;
  --pri:#ff6fa9; --pri-ink:#fff; --ok:#2e7d32; --danger:#c62828;
  --shadow:0 10px 24px rgba(0,0,0,.08); --radius:16px;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* ========== Base ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--ink);}
.hidden{display:none!important}

button{
  border:1px solid #ddd;background:#fff;padding:10px 14px;border-radius:12px;cursor:pointer
}
button.primary{background:var(--pri);color:var(--pri-ink);border-color:transparent}
button.link{background:#fff}
button.success{background:#e8f5e9;color:var(--ok);border-color:#c8e6c9}
button.danger{background:#ffebee;color:var(--danger);border-color:#ffcdd2}
button.secondary{background:#f6f6f6}

/* ========== Screens ========== */
.screen{min-height:100vh;display:flex;flex-direction:column;}
.auth-screen{align-items:center;justify-content:center;text-align:center;gap:12px}
.auth-screen h1{margin:0 0 6px}

/* ========== Topbar ========== */
.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 16px;background:#fff;box-shadow:var(--shadow);
}
.topbar .left{display:flex;align-items:center;gap:10px}
.topbar h1{margin:0;font-size:20px}
.topbar .right{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.topbar .right button.secondary{
  margin-left:0;background:#eee;color:#333;border-radius:6px;padding:6px 10px;font-size:.9rem;
  border:1px solid #ccc;cursor:pointer;transition:background .2s
}
.topbar .right button.secondary:hover{background:#ddd}

/* ========== Topic grid ========== */
.topics{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:16px;padding:16px
}
.topic-btn{
  background:#fff;border:1px solid #f1d7e2;box-shadow:var(--shadow);
  padding:16px;font-size:18px
}

/* ========== Status ========== */
.status{
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:8px;padding:16px
}
.status div{
  background:#fff;border:1px solid #f1d7e2;border-radius:12px;padding:10px 12px
}

/* ========== Card & Flip (·ªïn ƒë·ªãnh) ========== */
.card{
  position:relative;width:100%;max-width:820px; /* r·ªông h∆°n ch√∫t cho ·∫£nh */
  margin:12px auto;perspective:1200px;
}
.card-inner{
  position:relative;width:100%;
  min-height:420px;                     /* üëà ƒë·∫£m b·∫£o hai m·∫∑t b·∫±ng nhau */
  border-radius:var(--radius);box-shadow:var(--shadow);background:var(--card);
  overflow:hidden;
}

/* L·∫≠t t·ª´ng m·∫∑t ‚Äì KH√îNG l·∫≠t container */
.card-front,.card-back{
  position:absolute;inset:0;padding:24px;border-radius:var(--radius);background:transparent;
  -webkit-backface-visibility:hidden;backface-visibility:hidden;
  transform-style:preserve-3d;transition:transform .6s ease;
  display:flex;flex-direction:column;gap:10px;
}
.card-front{transform:rotateY(0deg)}
.card-back{transform:rotateY(180deg)}
.card.flipped .card-front{transform:rotateY(180deg)}
.card.flipped .card-back{transform:rotateY(360deg)} /* = 0deg */

.card-front .word{font-size:40px;margin:4px 0}
.pos{color:var(--sub);text-transform:uppercase;letter-spacing:.08em;font-size:12px}
.ipa{color:var(--pri);font-weight:600;margin-bottom:4px}

/* ·∫¢nh minh ho·∫°: √©p theo flashcard */
#wordImg{
  width:100%;
  height:220px;          /* üëà chi·ªÅu cao c·ªë ƒë·ªãnh (kh√¥ng tr√†n) */
  object-fit:cover;      /* c·∫Øt cho v·ª´a khung, kh√¥ng m√©o */
  border-radius:12px;margin:8px 0 4px;display:none;
}

/* H√†ng n√∫t ·ªü m·∫∑t tr∆∞·ªõc */
.actions{display:flex;flex-wrap:wrap;gap:8px}
.actions button{margin:0}

/* M·∫∑t sau: nghƒ©a + v√≠ d·ª• + n√∫t SRS */
.card-back h3{margin:0 0 4px}
.card-back p{margin:2px 0 0}
.srs-buttons{margin-top:auto;display:flex;flex-wrap:wrap;gap:8px} /* ƒë·∫©y n√∫t xu·ªëng cu·ªëi m·∫∑t sau */

/* ========== Nav ========== */
.nav{display:flex;gap:8px;justify-content:center;padding:20px;flex-wrap:wrap}

/* ========== Modal ========== */
.modal{
  position:fixed;inset:0;background:rgba(0,0,0,.35);
  display:flex;align-items:center;justify-content:center;padding:16px;z-index:1000;
}
.modal-content{
  width:min(720px,96vw);max-height:92vh;background:#fff;border-radius:16px;box-shadow:var(--shadow);
  padding:16px 16px 24px;display:flex;flex-direction:column;
}
.modal-header{
  display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;
  padding-bottom:8px;margin-bottom:12px;flex:0 0 auto;
}
.modal-body{
  flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch;
  padding:12px 16px 20px;max-height:calc(92vh - 60px);
}
#quizRoot{
  flex:1 1 auto;overflow:auto;-webkit-overflow-scrolling:touch;min-height:200px;padding-right:4px;
}
.modal-body input[type="text"],.modal-body input[type="url"],
.modal-body textarea,.modal-body select{
  width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font:inherit;margin-bottom:10px;background:#fff;
}
.modal-body .img-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.modal-body .img-row img{width:72px;height:72px;object-fit:cover;border-radius:10px;border:1px solid #eee}

/* ========== Responsive ========== */
@media (max-width:560px){
  .card-front .word{font-size:32px}
  .status{grid-template-columns:1fr}
  #wordImg{height:160px}       /* ·∫£nh th·∫•p h∆°n tr√™n mobile */
  .card-inner{min-height:360px}
}
/* === Mini flashcard size === */
.card{
  max-width:360px;   /* nh·ªè g·ªçn nh∆∞ flashcard gi·∫•y */
}
.card-inner{
  min-height:200px;
}
.card-front, .card-back{
  padding:12px;
}

.card-front .word{
  font-size:20px;   /* ch·ªØ nh·ªè v·ª´a m·∫Øt */
}
.ipa{ font-size:13px; }
.pos{ font-size:10px; }

#wordImg{
  height:80px;      /* ·∫£nh nh·ªè x√≠u */
  margin:4px 0;
  object-fit:cover;
  border-radius:8px;
}

/* mobile v·∫´n gi·ªØ v·ª´a m√†n h√¨nh */
@media (max-width:560px){
  .card{ max-width:85vw; }
  .card-inner{ min-height:180px; }
  .card-front .word{ font-size:18px; }
  #wordImg{ height:70px; }
}
